import{c as Ae,j as s,r as A}from"./client-C7wl62iw.js";var ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xe(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}async function te(){return new Promise((u,R)=>{var k;if(!((k=chrome==null?void 0:chrome.bookmarks)!=null&&k.getTree)){R(new Error("Bookmarks API not available"));return}chrome.bookmarks.getTree(T=>{const j=[];function w(h){h.url&&j.push({id:h.id,title:h.title||"无标题",url:h.url,dateAdded:h.dateAdded,parentId:h.parentId}),h.children&&h.children.forEach(w)}w(T[0]),u(j)})})}var ne={exports:{}};(function(u,R){(function(k,T){T(u)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ue,function(k){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)k.exports=globalThis.browser;else{const T="The message port closed before a response was received.",j=w=>{const h={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(h).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class S extends WeakMap{constructor(t,i=void 0){super(i),this.createItem=t}get(t){return this.has(t)||this.set(t,this.createItem(t)),super.get(t)}}const U=r=>r&&typeof r=="object"&&typeof r.then=="function",z=(r,t)=>(...i)=>{w.runtime.lastError?r.reject(new Error(w.runtime.lastError.message)):t.singleCallbackArg||i.length<=1&&t.singleCallbackArg!==!1?r.resolve(i[0]):r.resolve(i)},$=r=>r==1?"argument":"arguments",L=(r,t)=>function(o,...c){if(c.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${$(t.minArgs)} for ${r}(), got ${c.length}`);if(c.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${$(t.maxArgs)} for ${r}(), got ${c.length}`);return new Promise((x,g)=>{if(t.fallbackToNoCallback)try{o[r](...c,z({resolve:x,reject:g},t))}catch(l){console.warn(`${r} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,l),o[r](...c),t.fallbackToNoCallback=!1,t.noCallback=!0,x()}else t.noCallback?(o[r](...c),x()):o[r](...c,z({resolve:x,reject:g},t))})},K=(r,t,i)=>new Proxy(t,{apply(o,c,x){return i.call(c,r,...x)}});let v=Function.call.bind(Object.prototype.hasOwnProperty);const E=(r,t={},i={})=>{let o=Object.create(null),c={has(g,l){return l in r||l in o},get(g,l,d){if(l in o)return o[l];if(!(l in r))return;let m=r[l];if(typeof m=="function")if(typeof t[l]=="function")m=K(r,r[l],t[l]);else if(v(i,l)){let C=L(l,i[l]);m=K(r,r[l],C)}else m=m.bind(r);else if(typeof m=="object"&&m!==null&&(v(t,l)||v(i,l)))m=E(m,t[l],i[l]);else if(v(i,"*"))m=E(m,t[l],i["*"]);else return Object.defineProperty(o,l,{configurable:!0,enumerable:!0,get(){return r[l]},set(C){r[l]=C}}),m;return o[l]=m,m},set(g,l,d,m){return l in o?o[l]=d:r[l]=d,!0},defineProperty(g,l,d){return Reflect.defineProperty(o,l,d)},deleteProperty(g,l){return Reflect.deleteProperty(o,l)}},x=Object.create(r);return new Proxy(x,c)},B=r=>({addListener(t,i,...o){t.addListener(r.get(i),...o)},hasListener(t,i){return t.hasListener(r.get(i))},removeListener(t,i){t.removeListener(r.get(i))}}),Z=new S(r=>typeof r!="function"?r:function(i){const o=E(i,{},{getContent:{minArgs:0,maxArgs:0}});r(o)}),W=new S(r=>typeof r!="function"?r:function(i,o,c){let x=!1,g,l=new Promise(P=>{g=function(b){x=!0,P(b)}}),d;try{d=r(i,o,g)}catch(P){d=Promise.reject(P)}const m=d!==!0&&U(d);if(d!==!0&&!m&&!x)return!1;const C=P=>{P.then(b=>{c(b)},b=>{let O;b&&(b instanceof Error||typeof b.message=="string")?O=b.message:O="An unexpected error occurred",c({__mozWebExtensionPolyfillReject__:!0,message:O})}).catch(b=>{console.error("Failed to send onMessage rejected reply",b)})};return C(m?d:l),!0}),M=({reject:r,resolve:t},i)=>{w.runtime.lastError?w.runtime.lastError.message===T?t():r(new Error(w.runtime.lastError.message)):i&&i.__mozWebExtensionPolyfillReject__?r(new Error(i.message)):t(i)},q=(r,t,i,...o)=>{if(o.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${$(t.minArgs)} for ${r}(), got ${o.length}`);if(o.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${$(t.maxArgs)} for ${r}(), got ${o.length}`);return new Promise((c,x)=>{const g=M.bind(null,{resolve:c,reject:x});o.push(g),i.sendMessage(...o)})},G={devtools:{network:{onRequestFinished:B(Z)}},runtime:{onMessage:B(W),onMessageExternal:B(W),sendMessage:q.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:q.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},I={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return h.privacy={network:{"*":I},services:{"*":I},websites:{"*":I}},E(w,G,h)};k.exports=j(chrome)}})})(ne);var he=ne.exports;const fe=xe(he),H=fe;function pe(){const[u,R]=A.useState("recommendations"),[k,T]=A.useState(""),[j,w]=A.useState([]),[h,S]=A.useState([]),[U,z]=A.useState({total:0,categories:0,duplicates:0}),[$,L]=A.useState(!1),[K,v]=A.useState(""),[E,B]=A.useState("local"),[Z,W]=A.useState(!1),[M,q]=A.useState({current:0,total:0}),[G,I]=A.useState(null),[r,t]=A.useState(null),[i,o]=A.useState(null),[c,x]=A.useState(""),[g,l]=A.useState("");async function d(){const e=await te();w(e);const n=e.length,a=new Set(e.map(_=>_.parentId)).size,f=new Map;let N=0;for(const _ of e)f.has(_.url)?N++:f.set(_.url,!0);z({total:n,categories:a,duplicates:N})}async function m(){try{S([]),L(!0),v("生成推荐中...");const e=await new Promise(p=>{chrome.runtime.sendMessage({action:"getSettings"},y=>p(y))}),a=(await H.tabs.query({active:!0,currentWindow:!0}))[0],f=(e==null?void 0:e.recommendationMode)||"auto",N=f==="ai"||f==="auto"&&!!(e!=null&&e.aiApiKey);B(N?"ai":"local");const _=(e==null?void 0:e.serverUrl)||"http://localhost:5175",oe=await te(),D={current:{title:(a==null?void 0:a.title)||"",url:(a==null?void 0:a.url)||""},candidates:oe.map(p=>({id:p.id,title:p.title,url:p.url})),limit:5};N&&(D.provider=e==null?void 0:e.aiProvider,D.apiKey=e==null?void 0:e.aiApiKey,D.apiUrl=e==null?void 0:e.aiApiUrl,D.model=e==null?void 0:e.aiModel);const J=await fetch(`${_}/recommend/stream`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(D)});if(!J.ok||!J.body){const p=await new Promise((y,F)=>{chrome.runtime.sendMessage({action:"getRecommendations"},Y=>{chrome.runtime.lastError?F(chrome.runtime.lastError):y(Y)})});S(p??[]),L(!1),v("");return}const me=J.body.getReader(),ce=new TextDecoder;let V="";const ge=(p,y)=>{p==="mode"?v((y==null?void 0:y.mode)==="AI"?"AI 推荐生成中...":"生成推荐中..."):p==="reset"?S([]):p==="item"?S(F=>[...F,y]):p==="done"&&(L(!1),v(""))};for(;;){const{done:p,value:y}=await me.read();if(p)break;V+=ce.decode(y,{stream:!0});const F=V.split(`

`);V=F.pop()||"";for(const Y of F){const de=Y.split(`
`);let re="message",Q=null;for(const X of de)if(X.startsWith("event:"))re=X.slice(6).trim();else if(X.startsWith("data:"))try{Q=JSON.parse(X.slice(5).trim())}catch{Q=null}ge(re,Q)}}}catch(e){try{const n=await new Promise((a,f)=>{chrome.runtime.sendMessage({action:"getRecommendations"},N=>{chrome.runtime.lastError?f(chrome.runtime.lastError):a(N)})});S(n??[])}catch(n){console.error("recommend stream fallback failed:",n)}finally{L(!1),v(""),console.error("recommend stream failed:",e)}}}async function C(e){B(e),await new Promise(n=>{chrome.runtime.sendMessage({action:"setSettings",payload:{recommendationMode:e}},()=>n())}),await m()}function P(e,n){t(a=>a&&a.id===n&&a.list===e?null:{list:e,id:n})}async function b(e){try{await new Promise(n=>chrome.bookmarks.remove(e,()=>n()))}catch(n){console.error("remove bookmark failed:",n)}finally{t(null),await d(),await m()}}async function O(e,n,a){o({id:e,title:n,url:a}),x(n||""),l(a||""),t(null)}async function ae(){if(i)try{const e=await H.bookmarks.get(i.id),n=e==null?void 0:e[0],a=(n==null?void 0:n.parentId)||void 0;if(g&&g!==(n==null?void 0:n.url)){try{await new Promise(f=>chrome.bookmarks.remove(i.id,()=>f()))}catch{}a?await H.bookmarks.create({title:c||"",url:g,parentId:a}):await H.bookmarks.create({title:c||"",url:g})}else await new Promise(f=>chrome.bookmarks.update(i.id,{title:c||""},()=>f()))}catch(e){console.error("save edit failed:",e)}finally{o(null),await d(),await m()}}function ee(e,n){const a=`https://twitter.com/intent/tweet?text=${encodeURIComponent(e||"")}&url=${encodeURIComponent(n||"")}`;window.open(a,"_blank"),t(null)}A.useEffect(()=>{var n;const e=a=>{if((a==null?void 0:a.action)==="checkProgress"){const f=Number(a.current||0),N=Number(a.total||0);q({current:f,total:N})}};return(n=chrome.runtime.onMessage)==null||n.addListener(e),()=>{var a;try{(a=chrome.runtime.onMessage)==null||a.removeListener(e)}catch{}}},[]),A.useEffect(()=>{(async()=>(await d(),await m()))()},[]);const se=A.useMemo(()=>{const e=k.trim().toLowerCase();return e?j.filter(n=>(n.title+" "+n.url).toLowerCase().includes(e)):j},[j,k]);async function ie(){const e=new Map,n=[];for(const a of j)e.has(a.url)?n.push(a.id):e.set(a.url,a.id);await Promise.all(n.map(a=>new Promise(f=>{chrome.bookmarks.remove(a,()=>f())}))),await d(),alert(`清理完成！移除了 ${n.length} 个重复书签。`)}async function le(){W(!0),q({current:0,total:0});const e=await new Promise(n=>{chrome.runtime.sendMessage({action:"checkInvalidBookmarks"},a=>n(a))});W(!1),I(e||{success:!1,count:0}),await d()}return s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{padding:12},children:[s.jsxs("div",{className:"toolbar",children:[s.jsx("button",{className:`tab-btn ${u==="recommendations"?"active":""}`,onClick:()=>R("recommendations"),children:"推荐"}),s.jsx("button",{className:`tab-btn ${u==="bookmarks"?"active":""}`,onClick:()=>R("bookmarks"),children:"书签"}),s.jsx("button",{className:`tab-btn ${u==="stats"?"active":""}`,onClick:()=>R("stats"),children:"统计"})]}),u==="recommendations"&&s.jsxs("div",{children:[s.jsx("input",{className:"search",placeholder:"搜索书签...",value:k,onChange:e=>T(e.target.value)}),s.jsxs("div",{style:{marginTop:10},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("h3",{children:"智能推荐"}),s.jsxs("div",{className:"segmented",title:"推荐模式",children:[s.jsx("button",{className:`seg-btn ${E==="local"?"active":""}`,onClick:()=>C("local"),children:"本地"}),s.jsx("button",{className:`seg-btn ${E==="ai"?"active":""}`,onClick:()=>C("ai"),children:"AI"})]})]}),$&&s.jsx("div",{className:"loading-text",children:K}),s.jsxs("ul",{className:"list",children:[h.length===0&&s.jsx("li",{children:"暂无推荐"}),h.map((e,n)=>s.jsxs("li",{onClick:()=>window.open(e.url,"_blank"),style:{opacity:0,transform:"translateY(8px)",animation:"fadeInUp 240ms ease-out forwards",animationDelay:`${Math.min(n,8)*60}ms`,position:"relative",zIndex:r&&r.list==="recs"&&r.id===e.id?200:void 0},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("strong",{style:{maxWidth:260,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title}),e.source&&s.jsx("span",{style:{padding:"2px 6px",borderRadius:6,fontSize:12,background:e.source==="AI"?"#10b981":"#9ca3af",color:"#fff",marginLeft:8},children:e.source==="AI"?"AI 推荐":"本地推荐"}),s.jsx("div",{style:{marginLeft:8},children:s.jsx("button",{className:"menu-btn",onClick:a=>{a.stopPropagation(),P("recs",e.id)},"aria-label":"更多操作",title:"更多操作",children:"⋯"})})]}),s.jsx("small",{style:{color:"#6b7280"},children:e.url}),r&&r.list==="recs"&&r.id===e.id&&s.jsxs("div",{className:"menu",onClick:a=>a.stopPropagation(),children:[s.jsx("div",{className:"menu-item",onClick:()=>b(e.id),children:"移除"}),s.jsx("div",{className:"menu-item",onClick:()=>O(e.id,e.title,e.url),children:"更新"}),s.jsx("div",{className:"menu-item",onClick:()=>ee(e.title,e.url),children:"分享到 X"})]})]},e.id))]})]}),s.jsxs("div",{className:"toolbar",children:[s.jsx("button",{className:"btn",onClick:ie,children:"清理重复"}),s.jsx("button",{className:"btn",disabled:Z,onClick:le,children:"检查失效链接"}),s.jsx("button",{className:"btn",onClick:()=>{var e,n;return(n=(e=chrome.runtime).openOptionsPage)==null?void 0:n.call(e)},children:"打开设置"})]}),Z&&s.jsxs("div",{className:"progress",children:[s.jsxs("div",{className:"progress-title",children:["正在检测失效链接... ",M.current,"/",M.total||"?"]}),s.jsx("div",{className:"progress-line",children:s.jsx("span",{style:{width:`${M.total?Math.round(M.current/M.total*100):0}%`}})})]})]}),u==="bookmarks"&&s.jsxs("div",{children:[s.jsx("input",{className:"search",placeholder:"搜索书签...",value:k,onChange:e=>T(e.target.value)}),s.jsxs("ul",{className:"list",children:[se.length===0&&s.jsx("li",{children:"暂无书签"}),se.map(e=>s.jsxs("li",{onClick:()=>window.open(e.url,"_blank"),style:{position:"relative",zIndex:r&&r.list==="bookmarks"&&r.id===e.id?200:void 0},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:e.title}),s.jsx("br",{}),s.jsx("small",{children:e.url})]}),s.jsx("button",{className:"menu-btn",onClick:n=>{n.stopPropagation(),P("bookmarks",e.id)},"aria-label":"更多操作",title:"更多操作",children:"⋯"})]}),r&&r.list==="bookmarks"&&r.id===e.id&&s.jsxs("div",{className:"menu",onClick:n=>n.stopPropagation(),children:[s.jsx("div",{className:"menu-item",onClick:()=>b(e.id),children:"移除"}),s.jsx("div",{className:"menu-item",onClick:()=>O(e.id,e.title,e.url),children:"更新"}),s.jsx("div",{className:"menu-item",onClick:()=>ee(e.title,e.url),children:"分享到 X"})]})]},e.id))]})]}),u==="stats"&&s.jsxs("div",{className:"stat",children:[s.jsxs("div",{className:"card",children:[s.jsx("div",{children:"总书签数"}),s.jsx("div",{style:{fontSize:22,fontWeight:700},children:U.total})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{children:"分类数量"}),s.jsx("div",{style:{fontSize:22,fontWeight:700},children:U.categories})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{children:"重复书签"}),s.jsx("div",{style:{fontSize:22,fontWeight:700},children:U.duplicates})]})]})]}),G&&s.jsx("div",{className:"modal-backdrop",onClick:()=>I(null),children:s.jsxs("div",{className:"modal-card",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"modal-title",children:"检测完成"}),s.jsxs("div",{className:"modal-desc",children:["共发现 ",s.jsx("strong",{children:G.count??0})," 个失效链接，已归档至“失效链接”。"]}),s.jsx("div",{className:"modal-actions",children:s.jsx("button",{className:"btn",onClick:()=>I(null),children:"关闭"})})]})}),i&&s.jsx("div",{className:"modal-backdrop",onClick:()=>o(null),children:s.jsxs("div",{className:"modal-card",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"modal-title",children:"更新书签"}),s.jsx("div",{className:"modal-desc",children:s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("input",{className:"search",value:c,onChange:e=>x(e.target.value),placeholder:"标题"}),s.jsx("input",{className:"search",value:g,onChange:e=>l(e.target.value),placeholder:"URL"})]})}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{className:"btn",onClick:()=>o(null),children:"取消"}),s.jsx("button",{className:"btn primary",onClick:ae,children:"保存"})]})]})})]})}const be=Ae(document.getElementById("root"));be.render(s.jsx(pe,{}));
