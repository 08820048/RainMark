import{c as xe,j as s,r as p,t as H}from"./theme-11K_mN9q.js";var he=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fe(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}async function le(){return new Promise((d,N)=>{var b;if(!((b=chrome==null?void 0:chrome.bookmarks)!=null&&b.getTree)){N(new Error("Bookmarks API not available"));return}chrome.bookmarks.getTree(S=>{const C=[];function P(v){v.url&&C.push({id:v.id,title:v.title||"æ— æ ‡é¢˜",url:v.url,dateAdded:v.dateAdded,parentId:v.parentId}),v.children&&v.children.forEach(P)}P(S[0]),d(C)})})}var ce={exports:{}};(function(d,N){(function(b,S){S(d)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:he,function(b){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)b.exports=globalThis.browser;else{const S="The message port closed before a response was received.",C=P=>{const v={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(v).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class $ extends WeakMap{constructor(n,o=void 0){super(o),this.createItem=n}get(n){return this.has(n)||this.set(n,this.createItem(n)),super.get(n)}}const K=r=>r&&typeof r=="object"&&typeof r.then=="function",V=(r,n)=>(...o)=>{P.runtime.lastError?r.reject(new Error(P.runtime.lastError.message)):n.singleCallbackArg||o.length<=1&&n.singleCallbackArg!==!1?r.resolve(o[0]):r.resolve(o)},F=r=>r==1?"argument":"arguments",W=(r,n)=>function(c,...A){if(A.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${F(n.minArgs)} for ${r}(), got ${A.length}`);if(A.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${F(n.maxArgs)} for ${r}(), got ${A.length}`);return new Promise((k,h)=>{if(n.fallbackToNoCallback)try{c[r](...A,V({resolve:k,reject:h},n))}catch(l){console.warn(`${r} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,l),c[r](...A),n.fallbackToNoCallback=!1,n.noCallback=!0,k()}else n.noCallback?(c[r](...A),k()):c[r](...A,V({resolve:k,reject:h},n))})},X=(r,n,o)=>new Proxy(n,{apply(c,A,k){return o.call(A,r,...k)}});let E=Function.call.bind(Object.prototype.hasOwnProperty);const O=(r,n={},o={})=>{let c=Object.create(null),A={has(h,l){return l in r||l in c},get(h,l,f){if(l in c)return c[l];if(!(l in r))return;let u=r[l];if(typeof u=="function")if(typeof n[l]=="function")u=X(r,r[l],n[l]);else if(E(o,l)){let R=W(l,o[l]);u=X(r,r[l],R)}else u=u.bind(r);else if(typeof u=="object"&&u!==null&&(E(n,l)||E(o,l)))u=O(u,n[l],o[l]);else if(E(o,"*"))u=O(u,n[l],o["*"]);else return Object.defineProperty(c,l,{configurable:!0,enumerable:!0,get(){return r[l]},set(R){r[l]=R}}),u;return c[l]=u,u},set(h,l,f,u){return l in c?c[l]=f:r[l]=f,!0},defineProperty(h,l,f){return Reflect.defineProperty(c,l,f)},deleteProperty(h,l){return Reflect.deleteProperty(c,l)}},k=Object.create(r);return new Proxy(k,A)},z=r=>({addListener(n,o,...c){n.addListener(r.get(o),...c)},hasListener(n,o){return n.hasListener(r.get(o))},removeListener(n,o){n.removeListener(r.get(o))}}),Y=new $(r=>typeof r!="function"?r:function(o){const c=O(o,{},{getContent:{minArgs:0,maxArgs:0}});r(c)}),Z=new $(r=>typeof r!="function"?r:function(o,c,A){let k=!1,h,l=new Promise(I=>{h=function(j){k=!0,I(j)}}),f;try{f=r(o,c,h)}catch(I){f=Promise.reject(I)}const u=f!==!0&&K(f);if(f!==!0&&!u&&!k)return!1;const R=I=>{I.then(j=>{A(j)},j=>{let q;j&&(j instanceof Error||typeof j.message=="string")?q=j.message:q="An unexpected error occurred",A({__mozWebExtensionPolyfillReject__:!0,message:q})}).catch(j=>{console.error("Failed to send onMessage rejected reply",j)})};return R(u?f:l),!0}),B=({reject:r,resolve:n},o)=>{P.runtime.lastError?P.runtime.lastError.message===S?n():r(new Error(P.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?r(new Error(o.message)):n(o)},G=(r,n,o,...c)=>{if(c.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${F(n.minArgs)} for ${r}(), got ${c.length}`);if(c.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${F(n.maxArgs)} for ${r}(), got ${c.length}`);return new Promise((A,k)=>{const h=B.bind(null,{resolve:A,reject:k});c.push(h),o.sendMessage(...c)})},Q={devtools:{network:{onRequestFinished:z(Y)}},runtime:{onMessage:z(Z),onMessageExternal:z(Z),sendMessage:G.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:G.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},U={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return v.privacy={network:{"*":U},services:{"*":U},websites:{"*":U}},O(P,Q,v)};b.exports=C(chrome)}})})(ce);var pe=ce.exports;const be=fe(pe),re=be;function i(d,N){var b,S;try{const C=(S=(b=chrome==null?void 0:chrome.i18n)==null?void 0:b.getMessage)==null?void 0:S.call(b,d,N??[]);if(C)return C}catch{}return d}function ke(){var d,N;try{if(String(((N=(d=chrome==null?void 0:chrome.i18n)==null?void 0:d.getUILanguage)==null?void 0:N.call(d))||navigator.language||"").toLowerCase().startsWith("zh"))return"zh"}catch{}return"en"}function we(){const[d,N]=p.useState("recommendations"),[b,S]=p.useState(""),[C,P]=p.useState([]),[v,$]=p.useState([]),[K,V]=p.useState({total:0,categories:0,duplicates:0}),[F,W]=p.useState(!1),[X,E]=p.useState(""),[O,z]=p.useState("local"),[Y,Z]=p.useState(!1),[B,G]=p.useState({current:0,total:0}),[Q,U]=p.useState(null),[r,n]=p.useState(null),[o,c]=p.useState(null),[A,k]=p.useState(""),[h,l]=p.useState("");async function f(){const e=await le();P(e);const a=e.length,t=new Set(e.map(w=>w.parentId)).size,m=new Map;let x=0;for(const w of e)m.has(w.url)?x++:m.set(w.url,!0);V({total:a,categories:t,duplicates:x})}async function u(){try{$([]),W(!0),E(i("loading_generating"));const e=await new Promise(y=>{chrome.runtime.sendMessage({action:"getSettings"},M=>y(M))}),t=(await re.tabs.query({active:!0,currentWindow:!0}))[0],m=(e==null?void 0:e.recommendationMode)||"auto",x=m==="ai"||m==="auto"&&!!(e!=null&&e.aiApiKey);z(x?"ai":"local");const w=(e==null?void 0:e.serverUrl)||"http://localhost:5175",T=await le(),g={current:{title:(t==null?void 0:t.title)||"",url:(t==null?void 0:t.url)||""},candidates:T.map(y=>({id:y.id,title:y.title,url:y.url})),limit:5};x&&(g.provider=e==null?void 0:e.aiProvider,g.apiKey=e==null?void 0:e.aiApiKey,g.apiUrl=e==null?void 0:e.aiApiUrl,g.model=e==null?void 0:e.aiModel);const L=await fetch(`${w}/recommend/stream`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(g)});if(!L.ok||!L.body){const y=await new Promise((M,D)=>{chrome.runtime.sendMessage({action:"getRecommendations"},te=>{chrome.runtime.lastError?D(chrome.runtime.lastError):M(te)})});$(y??[]),W(!1),E("");return}const ee=L.body.getReader(),_=new TextDecoder;let J="";const ue=(y,M)=>{y==="mode"?E((M==null?void 0:M.mode)==="AI"?i("loading_ai_generating"):i("loading_generating")):y==="reset"?$([]):y==="item"?$(D=>[...D,M]):y==="done"&&(W(!1),E(""))};for(;;){const{done:y,value:M}=await ee.read();if(y)break;J+=_.decode(M,{stream:!0});const D=J.split(`

`);J=D.pop()||"";for(const te of D){const Ae=te.split(`
`);let oe="message",ne=null;for(const se of Ae)if(se.startsWith("event:"))oe=se.slice(6).trim();else if(se.startsWith("data:"))try{ne=JSON.parse(se.slice(5).trim())}catch{ne=null}ue(oe,ne)}}}catch(e){try{const a=await new Promise((t,m)=>{chrome.runtime.sendMessage({action:"getRecommendations"},x=>{chrome.runtime.lastError?m(chrome.runtime.lastError):t(x)})});$(a??[])}catch(a){console.error("recommend stream fallback failed:",a)}finally{W(!1),E(""),console.error("recommend stream failed:",e)}}}async function R(e){z(e),await new Promise(a=>{chrome.runtime.sendMessage({action:"setSettings",payload:{recommendationMode:e}},()=>a())}),await u()}function I(e,a){n(t=>t&&t.id===a&&t.list===e?null:{list:e,id:a})}async function j(e){try{await new Promise(a=>chrome.bookmarks.remove(e,()=>a()))}catch(a){console.error("remove bookmark failed:",a)}finally{n(null),await f(),await u()}}async function q(e,a,t){c({id:e,title:a,url:t}),k(a||""),l(t||""),n(null)}async function me(){if(o)try{const e=await re.bookmarks.get(o.id),a=e==null?void 0:e[0],t=(a==null?void 0:a.parentId)||void 0;if(h&&h!==(a==null?void 0:a.url)){try{await new Promise(m=>chrome.bookmarks.remove(o.id,()=>m()))}catch{}t?await re.bookmarks.create({title:A||"",url:h,parentId:t}):await re.bookmarks.create({title:A||"",url:h})}else await new Promise(m=>chrome.bookmarks.update(o.id,{title:A||""},()=>m()))}catch(e){console.error("save edit failed:",e)}finally{c(null),await f(),await u()}}async function ae(e,a){const t=ke();let m=`${i("share_fallback_prefix")}${(e||"").slice(0,120)}`,x=[];try{const g=await new Promise(_=>{chrome.runtime.sendMessage({action:"getSettings"},J=>_(J))}),L=(g==null?void 0:g.serverUrl)||"http://localhost:5175",ee=await fetch(`${L}/share/summarize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a||"",title:e||"",provider:g==null?void 0:g.aiProvider,apiKey:g==null?void 0:g.aiApiKey,apiUrl:g==null?void 0:g.aiApiUrl,model:g==null?void 0:g.aiModel,lang:t})});if(ee.ok){const _=await ee.json();_!=null&&_.text&&(m=`ðŸ”– ${String(_.text).trim()}`),Array.isArray(_==null?void 0:_.tags)&&(x=_.tags.slice(0,4))}}catch{}x.length||(x=t==="en"?["#RainMarkExtension","#Bookmarks"]:["#RainMarkæ’ä»¶","#ä¹¦ç­¾"]);const w=`${i("share_suffix_source")} ${x.join(" ")}`.trim(),T=`https://twitter.com/intent/tweet?text=${encodeURIComponent(`${m}
${w}`)}&url=${encodeURIComponent(a||"")}`;window.open(T,"_blank"),n(null)}p.useEffect(()=>{var a;const e=t=>{if((t==null?void 0:t.action)==="checkProgress"){const m=Number(t.current||0),x=Number(t.total||0);G({current:m,total:x})}else if((t==null?void 0:t.action)==="toast"&&(t!=null&&t.payload)){const m=t.payload||{},x=m.type||"info",w=m.title||"",T=m.message||"";x==="success"?H.success(T,w):x==="warning"?H.warning(T,w):x==="error"?H.error(T,w):H.info(T,w)}};return(a=chrome.runtime.onMessage)==null||a.addListener(e),()=>{var t;try{(t=chrome.runtime.onMessage)==null||t.removeListener(e)}catch{}}},[]),p.useEffect(()=>{(async()=>(await f(),await u()))()},[]);const ie=p.useMemo(()=>{const e=b.trim().toLowerCase();return e?C.filter(a=>(a.title+" "+a.url).toLowerCase().includes(e)):C},[C,b]);async function ge(){const e=new Map,a=[];for(const t of C)e.has(t.url)?a.push(t.id):e.set(t.url,t.id);await Promise.all(a.map(t=>new Promise(m=>{chrome.bookmarks.remove(t,()=>m())}))),await f(),H.success(i("alert_clean_done",[a.length]))}async function de(){Z(!0),G({current:0,total:0});const e=await new Promise(a=>{chrome.runtime.sendMessage({action:"checkInvalidBookmarks"},t=>a(t))});Z(!1),U(e||{success:!1,count:0}),await f()}return s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{padding:12},children:[s.jsxs("div",{className:"toolbar",children:[s.jsx("button",{className:`tab-btn ${d==="recommendations"?"active":""}`,onClick:()=>N("recommendations"),children:i("tab_recommendations")}),s.jsx("button",{className:`tab-btn ${d==="bookmarks"?"active":""}`,onClick:()=>N("bookmarks"),children:i("tab_bookmarks")}),s.jsx("button",{className:`tab-btn ${d==="stats"?"active":""}`,onClick:()=>N("stats"),children:i("tab_stats")})]}),d==="recommendations"&&s.jsxs("div",{children:[s.jsx("input",{className:"search",placeholder:i("search_placeholder"),value:b,onChange:e=>S(e.target.value)}),s.jsxs("div",{style:{marginTop:10},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("h3",{children:i("section_recommend")}),s.jsxs("div",{className:"segmented",title:"æŽ¨èæ¨¡å¼",children:[s.jsx("button",{className:`seg-btn ${O==="local"?"active":""}`,onClick:()=>R("local"),children:i("seg_local")}),s.jsx("button",{className:`seg-btn ${O==="ai"?"active":""}`,onClick:()=>R("ai"),children:i("seg_ai")})]})]}),F&&s.jsx("div",{className:"loading-text",children:X}),s.jsxs("ul",{className:"list",children:[v.length===0&&s.jsx("li",{children:i("no_recommendations")}),v.map((e,a)=>s.jsxs("li",{onClick:()=>window.open(e.url,"_blank"),style:{opacity:0,transform:"translateY(8px)",animation:"fadeInUp 240ms ease-out forwards",animationDelay:`${Math.min(a,8)*60}ms`,position:"relative",zIndex:r&&r.list==="recs"&&r.id===e.id?200:void 0},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("strong",{style:{maxWidth:260,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title}),e.source&&s.jsx("span",{style:{padding:"2px 6px",borderRadius:6,fontSize:12,background:e.source==="AI"?"#10b981":"#9ca3af",color:"#fff",marginLeft:8},children:e.source==="AI"?i("label_ai_recommend"):i("label_local_recommend")}),s.jsx("div",{style:{marginLeft:8},children:s.jsx("button",{className:"menu-btn",onClick:t=>{t.stopPropagation(),I("recs",e.id)},"aria-label":i("menu_more_actions"),title:i("menu_more_actions"),children:"â‹¯"})})]}),s.jsx("small",{style:{color:"#6b7280"},children:e.url}),r&&r.list==="recs"&&r.id===e.id&&s.jsxs("div",{className:"menu",onClick:t=>t.stopPropagation(),children:[s.jsx("div",{className:"menu-item",onClick:()=>j(e.id),children:i("menu_remove")}),s.jsx("div",{className:"menu-item",onClick:()=>q(e.id,e.title,e.url),children:i("menu_update")}),s.jsx("div",{className:"menu-item",onClick:()=>ae(e.title,e.url),children:i("menu_share_x")})]})]},e.id))]})]}),s.jsxs("div",{className:"toolbar",children:[s.jsx("button",{className:"btn",onClick:ge,children:i("btn_clean_duplicates")}),s.jsx("button",{className:"btn",disabled:Y,onClick:de,children:i("btn_check_invalid")}),s.jsx("button",{className:"btn",onClick:()=>{var e,a,t,m,x,w,T,g;try{const L=(a=(e=chrome==null?void 0:chrome.runtime)==null?void 0:e.getURL)==null?void 0:a.call(e,"options.html");L?(m=(t=chrome.tabs)==null?void 0:t.create)==null||m.call(t,{url:L}):(w=(x=chrome.runtime).openOptionsPage)==null||w.call(x)}catch{(g=(T=chrome.runtime).openOptionsPage)==null||g.call(T)}},children:i("btn_open_settings")})]}),Y&&s.jsxs("div",{className:"progress",children:[s.jsx("div",{className:"progress-title",children:i("progress_checking",[B.current,B.total||"?"])}),s.jsx("div",{className:"progress-line",children:s.jsx("span",{style:{width:`${B.total?Math.round(B.current/B.total*100):0}%`}})})]})]}),d==="bookmarks"&&s.jsxs("div",{children:[s.jsx("input",{className:"search",placeholder:i("search_placeholder"),value:b,onChange:e=>S(e.target.value)}),s.jsxs("ul",{className:"list",children:[ie.length===0&&s.jsx("li",{children:i("no_bookmarks")}),ie.map(e=>s.jsxs("li",{onClick:()=>window.open(e.url,"_blank"),style:{position:"relative",zIndex:r&&r.list==="bookmarks"&&r.id===e.id?200:void 0},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:e.title}),s.jsx("br",{}),s.jsx("small",{children:e.url})]}),s.jsx("button",{className:"menu-btn",onClick:a=>{a.stopPropagation(),I("bookmarks",e.id)},"aria-label":i("menu_more_actions"),title:i("menu_more_actions"),children:"â‹¯"})]}),r&&r.list==="bookmarks"&&r.id===e.id&&s.jsxs("div",{className:"menu",onClick:a=>a.stopPropagation(),children:[s.jsx("div",{className:"menu-item",onClick:()=>j(e.id),children:i("menu_remove")}),s.jsx("div",{className:"menu-item",onClick:()=>q(e.id,e.title,e.url),children:i("menu_update")}),s.jsx("div",{className:"menu-item",onClick:()=>ae(e.title,e.url),children:i("menu_share_x")})]})]},e.id))]})]}),d==="stats"&&s.jsxs("div",{className:"stat",children:[s.jsxs("div",{className:"card",children:[s.jsx("div",{children:i("stat_total_bookmarks")}),s.jsx("div",{style:{fontSize:22,fontWeight:700},children:K.total})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{children:i("stat_categories")}),s.jsx("div",{style:{fontSize:22,fontWeight:700},children:K.categories})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{children:i("stat_duplicates")}),s.jsx("div",{style:{fontSize:22,fontWeight:700},children:K.duplicates})]})]})]}),Q&&s.jsx("div",{className:"modal-backdrop",onClick:()=>U(null),children:s.jsxs("div",{className:"modal-card",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"modal-title",children:i("modal_check_done_title")}),s.jsx("div",{className:"modal-desc",children:i("modal_check_done_desc",[Q.count??0])}),s.jsx("div",{className:"modal-actions",children:s.jsx("button",{className:"btn",onClick:()=>U(null),children:i("btn_close")})})]})}),o&&s.jsx("div",{className:"modal-backdrop",onClick:()=>c(null),children:s.jsxs("div",{className:"modal-card",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"modal-title",children:i("modal_update_title")}),s.jsx("div",{className:"modal-desc",children:s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("input",{className:"search",value:A,onChange:e=>k(e.target.value),placeholder:i("placeholder_title")}),s.jsx("input",{className:"search",value:h,onChange:e=>l(e.target.value),placeholder:i("placeholder_url")})]})}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{className:"btn",onClick:()=>c(null),children:i("btn_cancel")}),s.jsx("button",{className:"btn primary",onClick:me,children:i("btn_save")})]})]})})]})}const ve=xe(document.getElementById("root"));ve.render(s.jsx(we,{}));
